--- nzbget-0.8.0-testing/TLS.cpp
+++ nzbget-0.8.0-testing/TLS.cpp
@@ -908,7 +908,7 @@
     char *buf;
     int bufsize;
     /* needed to get the DNS subjectAltNames: */
-    STACK *subj_alt_names;
+    _STACK *subj_alt_names;
     int subj_alt_names_count;
     GENERAL_NAME *subj_alt_name;
     /* did we find a name matching hostname? */
@@ -960,12 +960,12 @@
     /* Try the DNS subjectAltNames. */
     match_found = 0;
     if ((subj_alt_names =
-		(STACK*)X509_get_ext_d2i(x509cert, NID_subject_alt_name, NULL, NULL)))
+		(_STACK*)X509_get_ext_d2i(x509cert, NID_subject_alt_name, NULL, NULL)))
     {
-	subj_alt_names_count = sk_GENERAL_NAME_num(subj_alt_names);
+	subj_alt_names_count = sk_GENERAL_NAME_num((stack_st_GENERAL_NAME*) subj_alt_names);
 	for (i = 0; i < subj_alt_names_count; i++) 
 	{
-	    subj_alt_name = sk_GENERAL_NAME_value(subj_alt_names, i);
+	    subj_alt_name = sk_GENERAL_NAME_value((stack_st_GENERAL_NAME*) subj_alt_names, i);
 	    if (subj_alt_name->type == GEN_DNS) 
 	    {
 		if ((match_found = hostname_match(hostname_ascii, 
@@ -1105,7 +1105,7 @@
 
 #ifdef HAVE_OPENSSL
     
-    SSL_METHOD *ssl_method = NULL;
+    const SSL_METHOD *ssl_method = NULL;
     
     ssl_method = force_sslv3 ? SSLv3_client_method() : SSLv23_client_method();
     if (!ssl_method)
